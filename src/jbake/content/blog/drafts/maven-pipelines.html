title=Issues Implementing Deployment Pipelines with Mavendate=2013-03-09type=posttags=mavenstatus=draft~~~~~~<p>In this entry, I want to detail my experience implementing a deployment pipeline on a multi-module Maven project.  This experience left me feeling like Maven's model of including the product's version number inside the pom is a broken concept.  I haven't made up my mind yet, but I hope this experience details why I feel this way.</p><p><strong>The Project</strong></p><p>The goal has been to implement a build (or deployment) pipeline on a Maven 2 project that is composed of multiple modules.  This pipeline would contain a chain of Hudson Jobs that exercised aspects of the application.  The pipeline looked something like this:</p><p>[Insert Picture with commit-&gt;static analysis-&gt;integrationTest-&gt;promote-&gt;deployToDev-&gt;acceptanceTests-&gt;X-&gt;deployToTest-&gt;X-&gt;deployToProd" frameborder="0" allowfullscreen></iframe></p><p>When a developer checks in a change to version control, a new instance of this pipeline is created almost immediately.  The pipeline will call all jobs along the way until reaching the end of the acceptance test job or one of the jobs fails.  Even though our team is small, we check in frequently and numerous instances of the pipeline are instantiated daily.  This process worked great for all our needs except one, versioning.</p><p><strong>Problems with Versioning</strong></p><p>The problem we encountered had to do with how Maven defines versions for projects.  Products in active development are considered SNAPSHOTS and numerous versions can be deployed to the Maven Repository, each uniquely identified with a timestamp-increment# convention.</p><p>Two Fold - 1. Hard to capture the Snapshot UID at build time and 2. extremely difficult to promote a release candidate.</p><p>Introduction Problem  with maven and build pipelines</p><p>Introduce solution, sidestepping the Release Plugin</p><p>Where is the problem?</p><p>What did I really want to happen? (Promote a Snapshot to Release within the repository)</p><p>Should Version Number be part of Source or is it Meta Information?  Version in pom?  Release Plugin?</p>