<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Enforcing Coding Standards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The personal blog of J. Michael McGarr, professional automation rant monger.  Passionate about #devops #continuousDelivery #lean #agile">
    <meta name="author" content="https://twitter.com/SonOfGarr">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/asciidoctor.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/css/extra.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,300,400' rel='stylesheet' type='text/css'>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="/favicon.ico">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-49993013-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </head>
  <body>
    <div id="fb-root"></div>
      <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <script src="//platform.linkedin.com/in.js" type="text/javascript">
     lang: en_US
    </script>
    <div id="wrap">

	<!-- Fixed navbar -->
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="brand" href="/">Mike McGarr</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="/about.html">About</a></li>
                <li><a href="/archive.html">Posts</a></li>
                <li><a href="/talks.html">Talks</a></li>
                <li><a href="/feed.xml">Subscribe</a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
        </div>
      </div>
      <div class="container-fluid">
    <div class="row-fluid">

				<div class="span6 offset3">

					<div class="page-header">
						<h1>Enforcing Coding Standards</h1>
					</div>

					<p><em>February 10, 2010</em></p>

				</div>
		</div>


		<div class="row-fluid">

				<div class="span2 offset1">
					<p/>
					<p class="text-right"><em></em>
								<a href="/tags/checkstyle.html">checkstyle</a><br/>
</em>
								<a href="/tags/coding-standards.html">coding standards</a><br/>
</em>
								<a href="/tags/continuous-integration.html">continuous integration</a><br/>
</em>
								<a href="/tags/eclipse.html">eclipse</a><br/>
</em>
								<a href="/tags/hudson.html">hudson</a><br/>
</em>
								<a href="/tags/Java.html">Java</a><br/>
					</p>
				</div>

        <div class="span6">

        	<p><p>While most teams recognize the importance of coding standards, I have witnessed too many development teams who define a set of coding standards, yet do not enforce them. &nbsp;If you are not enforcing the coding standard, then you have no way of knowing your team's compliance with the standard and its effectiveness is negated. &nbsp;In this article, I hope to share some of my experiences with enforcing coding standards on software development projects.</p> 
<p><strong>Why are Coding Standards Important?</strong></p> 
<p>Convincing management of the importance of&nbsp; implementing coding standards is one of the first steps to successfully adoption. &nbsp;You will need to justify the time you will spend defining, documenting, communicating, fostering adoption and enforcing your coding standards. &nbsp;Your project manager will likely ask you the question, "So what are the benefits of implementing coding standards on our project?". &nbsp;Here are a few of the benefits of coding standards:</p> 
<ul> 
 <li><span style="text-decoration:underline;">Increased maintainable</span> - developers can quickly look at another developer's code and easily read it</li> 
 <li><span style="text-decoration:underline;">Increased staffing flexibility</span> - developers can move between modules in the application and not have to adjust to a team members coding styles</li> 
 <li><span style="text-decoration:underline;">Facilitates better designs</span> - for instance, limiting all methods to 40 lines forces developers to think about the functionality of the method</li> 
 <li><span style="text-decoration:underline;">Coding standards can improve documentation</span> - one of my favorite rules is to enforce strict Javadocs throughout the code</li> 
</ul> 
<p>Great, you management is on board and you have clearance to define and implement coding standards...what's next?<br> <strong> </strong></p> 
<p><strong>Defining the Standard</strong></p> 
<p><strong> </strong>In my opinion, this is where most teams go wrong (including myself). &nbsp;They want to collect all the various standards that are publicly defined, meet with the whole development team and then discuss in detail each of the standards one by one. &nbsp;This process can be time consuming, taking hours or even days, and you likely walk away without a team wide consensus.</p> 
<p>I recommend taking an Agile approach to defining your coding standards: define your standards as early as possible and evolve them often (early and often). &nbsp;Instead of building a consensus within the team by deliberating for days on the standards, start with an existing publicly available standard that you mostly agree with (like <a href="http://java.sun.com/docs/codeconv/" target="_blank">Sun's Java Coding Standards</a>)&nbsp;and adopt that. <a href="http://checkstyle.sourceforge.net/" target="_blank">Checkstyle</a>, a code standard enforcement tool, can enforce this standard out of the box with a standard definition file. &nbsp;Check in a copy of the Checkstyle file into your source code. &nbsp;When you apply this standard against your team's current source code, members of the team will begin the complain about certain violations being reported. &nbsp;This is good. &nbsp;They can make changes directly to the Checkstyle configuration file to change the standard. &nbsp;The team should feel like their coding standard is theirs to change and update as they wish, so give them the opportunity to own it and change it, within reason of course.</p> 
<p>It is also important to make sure that team knows what the standard is so they can start using it. &nbsp;Part of this process is making sure that the coding standard is documented. &nbsp;I personally do not recommend that you go out and create a lengthy Word document detailing every coding standard (I have done this before and it is painful and useless). &nbsp;If you must document the standard, use a Wiki page which is easily accessible to the team and easy to maintain. &nbsp;Your wiki page should merely point to the publicly available standard you previously chose and possibly provide a link to the Checkstyle definition file in source control. &nbsp;Remember, you are defining a standard for developers, who prefer something functioning (like Checkstyle) over the written word.</p> 
<p><strong>Adopting the Standard</strong></p> 
<p>In order to facilitate the adoption process, there are a number of tools you should provide your team that will make it easy for them to migrate to the new coding standard. &nbsp;We already mentioned using Checkstyle to define the standard. &nbsp;Checkstyle is a command line tool that can be integrated with common build tools such as <a href="http://ant.apache.org/" target="_blank">Ant</a> or <a href="http://maven.apache.org/" target="_blank">Maven</a>. &nbsp;While build time analysis of the coding standard is useful for reporting, developers need immediate feedback on their compliance as they write code. &nbsp;To achieve this, I recommend using Checkstyle integration directly in your IDE. &nbsp;Checkstyle has plugins for <a href="http://www.eclipse.org/" target="_blank">Eclipse</a>, <a href="http://netbeans.org/" target="_blank">Netbeans</a>, <a href="http://www.jetbrains.com/idea/" target="_blank">IntelliJ</a> and more. &nbsp;This integration allows the developers to see the violation as they type and address it immediately, preventing new violations from entering the code.</p> 
<p>In addition to Checkstyle integration, IDE like Eclipse provide out of the box code formatters that can format your code to a given standard. &nbsp;Unfortunately, Eclipse's formatter definition is decoupled from a Checkstyle definition so as your Checkstyle definition file changes, you will also have to make changes to your Eclipse formatter definition, but it is worth the effort.</p> 
<p>Once your standard is well defined, you can use a bulk formatting tool like <a href="http://jalopy.sourceforge.net/" target="_blank">Jalopy</a> to format all of your source code in one sweep. &nbsp;I am hesitant to recommend this approach due to the possibility of introducing bugs due to formatting changes (this is possible). &nbsp;If you have a lot of unit tests, then the risk of using this tool decreases significantly. &nbsp;If you do want to use Jalopy, make a separate branch of your source code first, this will reduce the risk to the mainline of development, especially if you are working on legacy code.</p> 
<p><strong>Enforcing the Standard</strong></p> 
<p>Great, so now you have a code standard defined.&nbsp; You need to start enforcing it. &nbsp;After doing this on multiple projects, the most useful method of enforcing coding standards is to integrate Checkstyle into your Continuous Integration (CI) builds. &nbsp;If you aren't using a CI server like <a href="http://hudson-ci.org/" target="_blank">Hudson</a>, consider adding this to your list of reasons why you need to add a build server to your infrastructure. &nbsp;I have been using Hudson successfully for a while and I am huge fan of its simplicity.</p> 
<p><img class=" " title="Checkstyle Trends" src="http://wiki.hudson-ci.org/download/attachments/31457291/graph-priority.png?version=1&amp;modificationDate=1242230697000" alt="Checkstyle Trends" width="410" height="170"></p> 
<p>Every night, our Hudson server runs Checkstyle against the code base to determine how many code standard violations exist in the code. &nbsp;Hudson trends the number of violations over consecutive builds, which is useful for tracking the team's progress during a lengthy adoption effort. &nbsp;Hudson's dashboarding capabilities allow the team easy access to the details of violations drilling down to the exact line of code. &nbsp;Hudson can also be set up to define thresholds, which can mark the build as unstable or even fail the build if too many Checkstyle violations are introduced into a build. &nbsp;This ability coupled with Hudson's multiple feedback mechanisms provides the team will daily reminders that the application code is in violation of the standard.</p> 
<p>Another tool I utilize to help encourage adoption of the coding standard was a cool Hudson plugin called the <a href="http://wiki.hudson-ci.org/display/HUDSON/The+Continuous+Integration+Game+plugin" target="_blank">Continuous Integration game</a>. &nbsp;This plugin assigns positive and negative point values to successful and failed builds, as well as Checkstyle violations. &nbsp;It then provides the team with a Leaderboard showing how many points are assigned to each developer. &nbsp;This may sound a bit sophomoric, but I saw a profound difference in each developer's attitude towards resolving coding standards. &nbsp;This plugin taps into everybody's competitive spirit, but it should be used with some <a href="http://www.chillisoft.co.za/blog/?p=244" target="_blank">caution</a>.</p> 
<p>In summary, if you want your team to quickly adopt a coding standard, you need define the standard early, make the it easily available to the team and integrate standard checks with your continuous integration server. &nbsp;The key to making this successful is ensuring that the whole process is inexpensive to setup and maintain. &nbsp;Enjoy and good luck!</p></p>

					<p><em>Share this:</em></p>
          <p style="float:left">
                <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.mikemcgarr.com/blog/enforcing-coding-standards.html" data-via="SonOfGarr" data-lang="fr">Tweeter</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                <div class="g-plusone" data-size="medium" data-href="http://www.mikemcgarr.com/blog/enforcing-coding-standards.html"></div>
                <script type="IN/Share" data-url="http://www.mikemcgarr.com/blog/enforcing-coding-standards.html" data-counter="right"></script>
                <div class="fb-like" data-href="http://www.mikemcgarr.com/blog/enforcing-coding-standards.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>
          </p>

          <hr>

          <div id="disqus_thread">
          <script type="text/javascript">
                var disqus_shortname = 'mikemcgarr';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
    </div>

		</div>
		<div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">All posts on this blog are published with a <em>Creative Commons by-nc-sa</em> license.<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"/></a></p>
        <p class="muted credit">&copy; 2009-2016 | Mixed with <a href="http://twitter.github.com/bootstrap/">Bootstrap v2.3.1</a> | Baked with <a href="http://jbake.org">JBake v2.6.1</a></p>
      </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/run_prettify.js"></script>
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
  </body>
</html>
