<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Issues Implementing Deployment Pipelines with Maven</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The personal blog of J. Michael McGarr, professional automation rant monger.  Passionate about #devops #continuousDelivery #lean #agile">
    <meta name="author" content="https://twitter.com/jmichaelmcgarr">
    <meta name="keywords" content="">
    <meta name="generator" content"JBake">

    <!-- Le styles -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/asciidoctor.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/css/extra.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-49993013-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </head>
  <body>
    <div id="wrap">
	
	<!-- Fixed navbar -->
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="brand" href="/">Mike McGarr</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="/about.html">About</a></li>
                <li><a href="/archive.html">Posts</a></li>
                <li><a href="#">Talks</a></li>
                <li><a href="/feed.xml">Subscribe</a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
        </div>
      </div>
      <div class="container-fluid">
    <div class="row-fluid">
    
        <div class="span8 offset2">
	
        	<div class="page-header">
        		<h1>Issues Implementing Deployment Pipelines with Maven</h1>
        	</div>

        	<p><em>09 March 2013</em></p>

        	<p><p>In this entry, I want to detail my experience implementing a deployment pipeline on a multi-module Maven project.  This experience left me feeling like Maven's model of including the product's version number inside the pom is a broken concept.  I haven't made up my mind yet, but I hope this experience details why I feel this way.</p>
<p><strong>The Project</strong></p>
<p>The goal has been to implement a build (or deployment) pipeline on a Maven 2 project that is composed of multiple modules.  This pipeline would contain a chain of Hudson Jobs that exercised aspects of the application.  The pipeline looked something like this:</p>
<p>[Insert Picture with commit-&gt;static analysis-&gt;integrationTest-&gt;promote-&gt;deployToDev-&gt;acceptanceTests-&gt;X-&gt;deployToTest-&gt;X-&gt;deployToProd" frameborder="0" allowfullscreen></iframe></p>
<p>When a developer checks in a change to version control, a new instance of this pipeline is created almost immediately.  The pipeline will call all jobs along the way until reaching the end of the acceptance test job or one of the jobs fails.  Even though our team is small, we check in frequently and numerous instances of the pipeline are instantiated daily.  This process worked great for all our needs except one, versioning.</p>
<p><strong>Problems with Versioning</strong></p>
<p>The problem we encountered had to do with how Maven defines versions for projects.  Products in active development are considered SNAPSHOTS and numerous versions can be deployed to the Maven Repository, each uniquely identified with a timestamp-increment# convention.</p>
<p>Two Fold - 1. Hard to capture the Snapshot UID at build time and 2. extremely difficult to promote a release candidate.</p>
<p>Introduction Problem  with maven and build pipelines</p>
<p>Introduce solution, sidestepping the Release Plugin</p>
<p>Where is the problem?</p>
<p>What did I really want to happen? (Promote a Snapshot to Release within the repository)</p>
<p>Should Version Number be part of Source or is it Meta Information?  Version in pom?  Release Plugin?</p>
</p>

            <hr>

            <div id="disqus_thread">
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'mikemcgarr'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>
    </div>
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2013 | Mixed with <a href="http://twitter.github.com/bootstrap/">Bootstrap v2.3.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.0</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/run_prettify.js"></script>
    
  </body>
</html>